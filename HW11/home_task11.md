## Домашнее задание #11

### Среда выполнения

Операционная система: **Linux Fedora 42**
Способ развёртывания **PostgreSQL**: **Docker**
Версия **PostgreSQL**: 17.0

### Задания

> Выбор таблицы для секционирования. Обоснуйте свой выбор.

Для секционирования выбрана таблица *boarding_passes*. Выбрана потому что это топ-2 таблица по размеру и она не имеет входящих внешних ключей. Запросы определения размера таблиц и проверки ключей приложены в файлах *tables_sizes* и *f_show_foreign_keys* соответственно.

> Определитесь с типом секционирования

Секционирование по диапазону. Секционирование будет проводиться по месяцу запланированной отправки рейса(таблица *flights*, поле *scheduled_departure*). Поле отсутствует в таблице *boarding_passes*, его нужно добавить. Запрос для определения атрибутов таблицы приложен в файле *f_show_table_attributes*.

> Создание секционированной таблицы

ddl новой таблицы приложен в файле *boarding_passes_new_ddl*. Создание секций описано в файле *create_partitions*. В секциях нужно создать внешний ключ по аналогии с исходной таблицей *boarding_passes*; запрос на создание этого ключа для каждой секции приложен в файле *create_foreign_key*.

> Миграция данных

Запрос на перенос данных из старой таблицы в новую приложен в файле *data_migration*. Запрос на проверку корректности переноса приложен в файле *data_migration_check*. Результат проверки показан на скриншоте *migration_result.png*.

> Оптимизация запросов

Запросы для сравнения производительности приведены в файлах *old_perf_test* и *new_perf_test*. Результаты показаны на скриншотах *old_explain.png* и *new_explain.png*.

> Тестирование

Вставка работает корректно ввиду успешной миграции данных. Тестирование удаления показано на скриншоте *delete_check.png*.

